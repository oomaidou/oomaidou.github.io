{{/*
ä¼˜æƒ æŒ‰é’®ç»„ä»¶æ¨¡æ¿
ç”¨æ³•ï¼š
{{ partial "coupon-button.html" (dict 
    "type" "link|copy|wxapp" 
    "title" "ä¼˜æƒ æ ‡é¢˜" 
    "content" "é“¾æ¥æˆ–å¤åˆ¶å†…å®¹" 
    "description" "æè¿°æ–‡å­—"
    "platform" "å¹³å°åç§°(å¯é€‰)"
) }}
*/}}

{{ $type := .type }}
{{ $title := .title }}
{{ $content := .content }}
{{ $description := .description | default "" }}
{{ $platform := .platform | default "" }}
{{ $id := printf "coupon-%d" (now.Unix) }}

<div class="coupon-item">
    {{ if eq $type "link" }}
        {{/* é“¾æ¥å½¢å¼ - ç›´æ¥è·³è½¬ */}}
        <div class="coupon-link">
            <span class="coupon-emoji">ğŸ”¥</span>
            <a href="{{ $content }}" target="_blank" class="coupon-link-btn">{{ $title }}</a>
            {{ if $description }}
                <span class="coupon-desc">{{ $description }}</span>
            {{ end }}
        </div>
    {{ else if eq $type "copy" }}
        {{/* å¯†ä»¤å½¢å¼ - å¤åˆ¶æŒ‰é’® */}}
        <div class="coupon-copy">
            <span class="coupon-emoji">ğŸ’°</span>
            <span class="coupon-title">{{ $title }}ï¼š</span>
            <span id="{{ $id }}" class="coupon-code">{{ $content }}</span>
            <button onclick="copyToClipboard('#{{ $id }}', 'å¤åˆ¶æˆåŠŸï¼{{ if $platform }}æ‰“å¼€{{ $platform }}appé¢†å–{{ else }}æ‰“å¼€å¯¹åº”appé¢†å–{{ end }}')" class="coupon-copy-btn">
                ğŸ“‹ ä¸€é”®å¤åˆ¶
            </button>
            {{ if $description }}
                <div class="coupon-desc">{{ $description }}</div>
            {{ end }}
        </div>
    {{ else if eq $type "wxapp" }}
        {{/* å¾®ä¿¡å°ç¨‹åºå½¢å¼ - å¤åˆ¶æç¤ºå¾®ä¿¡æ‰“å¼€ */}}
        <div class="coupon-wxapp">
            <span class="coupon-emoji">ğŸ¯</span>
            <span class="coupon-title">{{ $title }}ï¼š</span>
            <span id="{{ $id }}" data-type="wxapp" class="coupon-code">{{ $content }}</span>
            <button onclick="copyToClipboard('#{{ $id }}', 'å¤åˆ¶æˆåŠŸï¼æ‰“å¼€ä»»ä¸€å¾®ä¿¡ç²˜è´´')" class="coupon-copy-btn wxapp">
                ğŸ“‹ å¤åˆ¶æ‰“å¼€å¾®ä¿¡
            </button>
            {{ if $description }}
                <div class="coupon-desc">{{ $description }}</div>
            {{ end }}
        </div>
    {{ end }}
</div>